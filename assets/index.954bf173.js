import{i as q,B as G,g as J,u as O,a as Q,o as j,b as V,r as B,c as h,d as $,e as w,f as t,h as X,n as A,y as Z,C as ee,_ as te,S as se,j as oe,k as p,t as C,s as ae,l as re,m as ne,p as le,q as k,w as T,v as D,x as ie,F as S,z,A as U,D as b,E,G as L,H,I as de,J as ue,K as ce,L as pe}from"./vendor.db867598.js";const he=function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))o(e);new MutationObserver(e=>{for(const s of e)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function n(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerpolicy&&(s.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?s.credentials="include":e.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(e){if(e.ep)return;e.ep=!0;const s=n(e);fetch(e.href,s)}};he();const fe={apiKey:"AIzaSyD5G1tB0tO3pSHEDtY8yzROY9uQrsYFSs4",authDomain:"todo-e47c0.firebaseapp.com",databaseURL:"https://todo-e47c0-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"todo-e47c0",storageBucket:"todo-e47c0.appspot.com",messagingSenderId:"391559150737",appId:"1:391559150737:web:2231f001dd5f4ec3991330"},ke=q(fe),K=G(),u=J(ke),ge={setup(l){const a=O(),n=Q();return j(()=>{V(u,o=>{o&&(n.path=="/login"||n.path=="/register")&&a.replace("/")})}),(o,e)=>{const s=B("router-view");return h(),$(s)}}};const ve={class:"modal-overlay w-full h-full bg-black/40 flex justify-center items-center"},me={class:"modal-body w-10/12 h-1/3 sm:w-3/5 md:w-2/5 bg-white dark:bg-dark-bg rounded-xl flex justify-around items-center flex-col p-5"},R={props:{isDark:Boolean},setup(l){const a=l;return(n,o)=>(h(),w("div",{class:A(["modal absolute top-0 left-0 bottom-0 right-0",[a.isDark?"dark":""]])},[t("div",ve,[t("div",me,[X(n.$slots,"default")])])],2))}},M=()=>({addData:async(n,o)=>{try{await Z(ee(K,"users",o),{tasks:n})}catch(e){console.log("Error handling document: ",e)}},readData:async n=>{try{const o=I();o.$reset(),(await te(se(K,"users"))).forEach(s=>{if(s.id==n&&o.tasks.length==0){for(let i of s.data().tasks)o.tasks.push(i);o.filteredTasks=o.tasks}})}catch(o){console.log("Error handling document: ",o)}}}),{addData:W}=M(),I=oe("main",{state:()=>({tasks:[],filteredTasks:[],counter:0,isDark:!1,activeEl:0,activeTask:[],completedTask:[]}),getters:{},actions:{addTask(l){l!=""&&(this.tasks=[{content:l,done:!1},...this.tasks],this.counter++,this.filteredTasks=this.tasks,this.activeEl=0)},removeTask(l,a){this.tasks=this.tasks.filter(n=>n!=l),this.filteredTasks=this.tasks,l.done||this.counter--,W(this.tasks,a)},filterTask(l){this.activeEl=l.id,this.filteredTasks=this.tasks.filter(a=>{if(l.name=="Active")return a.done==!1;if(l.name=="Completed")return a.done==!0;if(l.name=="All")return a})},toggleTask(l,a){l.done=!l.done,l.done==!0?this.counter--:this.counter++,W(this.tasks,a)},toggleTheme(){this.isDark=!this.isDark}}}),be={class:"w-full h-auto bg-very-light-gray dark:bg-dark-bg-secondary flex items-center gap-4 px-4 py-[10px] border-b border-light-grayish-blue dark:border-dark-border relative"},we={props:{task:Object},setup(l){const a=l,n=I(),o={icon:["bg-icon-check w-[11px] h-[9px]"],text:["line-through text-light-grayish-blue dark:text-dark-text-secondary"]},e={icon:["w-5 h-5 border-2 rounded-full border-gray-200"],text:["dark:text-dark-text"]};return(s,i)=>(h(),w("div",be,[t("div",{class:A(["w-5 h-5 rounded-full flex items-center justify-center cursor-pointer",[a.task.done?"check":""]]),onClick:i[0]||(i[0]=g=>p(n).toggleTask(a.task,p(u).currentUser!=null?p(u).currentUser.uid:""))},[t("i",{class:A([a.task.done?o.icon:e.icon])},null,2)],2),t("p",{class:A([[a.task.done?o.text:e.text],"w-3/4 break-words"])},C(a.task.content),3),t("i",{class:"bg-icon-cross w-[18px] h-[18px] absolute right-5 transition-all hover:rotate-90 cursor-pointer",onClick:i[1]||(i[1]=g=>p(n).removeTask(a.task,p(u).currentUser!=null?p(u).currentUser.uid:""))})]))}},N=()=>({login:async(e,s)=>{await ae(u,e,s)},register:async(e,s)=>{await re(u,e,s)},logout:async()=>{await ne(u)},resetPassword:async e=>{await le(u,e)}}),ye={class:"h-screen dark:bg-dark-bg"},_e={class:"z-0 h-72 dark:bg-desktop-dark bg-desktop-light bg-cover bg-center"},xe={class:"container z-10 w-11/12 md:w-3/5 lg:w-2/5 h-auto mx-auto pt-16 pb-40 sm:py-16"},$e={class:"flex justify-between"},Ce=t("h1",{class:"text-3xl font-bold tracking-widest text-very-light-gray"}," TODO ",-1),Te={class:"w-full h-12 bg-white dark:bg-dark-bg-secondary rounded flex items-center gap-4 px-4 mt-12 mb-8"},De=t("div",{class:"w-5 h-5 border-2 rounded-full border-gray-200"},null,-1),Pe=["onKeypress"],Ae={class:"rounded-t overflow-hidden shadow-xl"},Ee={class:"w-full h-12 bg-white dark:bg-dark-bg-secondary flex justify-between items-center px-4 rounded-b relative shadow-xl"},Se={class:"text-xs text-dark-grayish-blue dark:text-dark-text-secondary"},Ue={class:"flex text-sm absolute bottom-[-5rem] left-0 rounded w-full h-12 justify-center bg-white dark:bg-dark-bg-secondary gap-4 shadow-xl sm:static sm:shadow-none sm:w-fit"},Le=["onClick"],Re={class:"absolute top-5 lg:top-10 right-5 lg:right-10"},je={key:0},Ve=E("Login"),Be={key:1},Oe=E("Logout"),Ie=t("h1",{class:"title dark:text-dark-text"},"Do you want to log out",-1),Ne=E("Yes"),ze={setup(l){const{addData:a,readData:n}=M(),{logout:o}=N(),e=I(),s=k(""),i=k(!1),g=k(!1),_=()=>{i.value?(e.addTask(s.value),a(e.tasks,u.currentUser.uid),s.value=""):(e.addTask(s.value),s.value="")},y=[{name:"All",id:0},{name:"Active",id:1},{name:"Completed",id:2}],P=()=>{for(let f of e.filteredTasks)f.done&&(e.removeTask(f,u.currentUser!=null?u.currentUser.uid:""),e.activeEl=0)};return j(()=>{V(u,async f=>{f?(await n(f.uid),e.counter=e.tasks.filter(r=>!r.done).length,i.value=!0):(i.value=!1,e.$reset())})}),(f,r)=>{const x=B("router-link");return h(),w(S,null,[t("div",{class:A([p(e).isDark?"dark":""])},[t("div",ye,[t("div",_e,[t("div",xe,[t("div",$e,[Ce,t("i",{class:"bg-icon-moon dark:bg-icon-sun w-[26px] h-[26px] cursor-pointer transition ease-in delay-1000",onClick:r[0]||(r[0]=(...d)=>p(e).toggleTheme&&p(e).toggleTheme(...d))})]),t("div",Te,[De,T(t("input",{type:"text",class:"w-full placeholder:text-dark-grayish-blue dark:bg-dark-bg-secondary dark:text-dark-text focus:outline-none caret-bright-blue",placeholder:"Add a new task","onUpdate:modelValue":r[1]||(r[1]=d=>s.value=d),onKeypress:ie(_,["enter"])},null,40,Pe),[[D,s.value]])]),t("div",Ae,[(h(!0),w(S,null,z(p(e).filteredTasks,(d,v)=>(h(),$(we,{key:v,task:d},null,8,["task"]))),128))]),t("div",Ee,[t("p",Se,C(p(e).counter)+" "+C(p(e).counter>=2?"tasks":"task")+" left ",1),t("div",Ue,[(h(),w(S,null,z(y,(d,v)=>t("button",{key:v,onClick:c=>p(e).filterTask(d),class:A(["dark:text-dark-text-secondary",[p(e).activeEl===v?"active":""]])},C(d.name),11,Le)),64))]),t("button",{class:"text-sm dark:text-dark-text-secondary",onClick:r[2]||(r[2]=d=>P())}," Clear Completed ")])])])])],2),t("div",Re,[i.value?(h(),w("div",Be,[E(" Hi "+C(p(u).currentUser.email.split("@")[0])+", ",1),t("button",{onClick:r[3]||(r[3]=d=>g.value=!0)},[U(x,{to:"/"},{default:b(()=>[Oe]),_:1})])])):(h(),w("button",je,[U(x,{to:"/login"},{default:b(()=>[Ve]),_:1})]))]),g.value?(h(),$(R,{key:0,isDark:p(e).isDark},{default:b(()=>[Ie,t("button",{onClick:r[4]||(r[4]=d=>(p(o)(),g.value=!1)),class:"btn bg-sky-400 shadow-sky-400/50"},[U(x,{to:"/"},{default:b(()=>[Ne]),_:1})]),t("button",{onClick:r[5]||(r[5]=d=>g.value=!1),class:"btn shadow-red-400/50"}," No ")]),_:1},8,["isDark"])):L("",!0)],64)}}},He={class:"check h-screen flex justify-center items-center"},Ke={class:"container w-10/12 sm:w-8/12 md:w-6/12 lg:w-4/12 h-72 bg-white rounded-md p-4"},Me=t("h1",{class:"text-3xl text-center"},"Login",-1),We=["onSubmit"],Fe=t("input",{type:"submit",value:"Login",class:"w-full h-10 bg-dark-bg-secondary text-very-light-grayish-blue rounded-md cursor-pointer"},null,-1),Ye={class:"pt-6"},qe={class:"float-left"},Ge=E("Register"),Je={class:"title"},Qe=t("h1",{class:"title"},"Please check your email!",-1),Xe={setup(l){const{login:a,resetPassword:n}=N(),o=k(""),e=k(""),s=k(""),i=k(!1),g=k(!1),_=k(!1),y=k(""),P=O(),f=v=>{switch(v){case"auth/wrong-password":s.value="Wrong password! Please try again";break;case"auth/user-not-found":s.value="User not found! Please register or try again";break}e.value="",i.value=!0},r=async()=>{await a(o.value,e.value).then().catch(v=>{f(v.code)}),d()},x=async()=>{y.value!=""&&(await n(y.value),g.value=!1,_.value=!0)},d=()=>{V(u,v=>{v&&P.push("/")})};return j(()=>{u.currentUser&&P.push("/")}),(v,c)=>{const Y=B("router-link");return h(),w(S,null,[t("div",He,[t("div",Ke,[Me,t("form",{onSubmit:H(r,["prevent"]),class:"flex flex-col gap-4"},[T(t("input",{type:"email",placeholder:"Email","onUpdate:modelValue":c[0]||(c[0]=m=>o.value=m),class:"w-full h-10"},null,512),[[D,o.value]]),T(t("input",{type:"password",placeholder:"Password","onUpdate:modelValue":c[1]||(c[1]=m=>e.value=m),class:"w-full h-10"},null,512),[[D,e.value]]),Fe],40,We),t("div",Ye,[t("p",qe,[U(Y,{to:"/register"},{default:b(()=>[Ge]),_:1})]),t("button",{onClick:c[2]||(c[2]=m=>g.value=!0),class:"float-right"}," Reset Password ")])])]),i.value?(h(),$(R,{key:0},{default:b(()=>[t("h1",Je,C(s.value),1),t("button",{onClick:c[3]||(c[3]=m=>i.value=!1),class:"btn shadow-red-400/50"}," Close ")]),_:1})):L("",!0),g.value?(h(),$(R,{key:1},{default:b(()=>[T(t("input",{type:"email","onUpdate:modelValue":c[4]||(c[4]=m=>y.value=m),placeholder:"Your email",class:"w-4/5 h-10 placeholder:italic focus:outline-none border-2 border-black rounded-md px-2"},null,512),[[D,y.value]]),t("button",{onClick:c[5]||(c[5]=m=>x()),class:"btn w-3/4 lg:w-1/2 h-10 bg-sky-400 shadow-sky-400/50"}," Send reset link! "),t("button",{onClick:c[6]||(c[6]=m=>g.value=!1),class:"btn w-3/4 lg:w-1/2 h-10 shadow-red-400/50"}," Close ")]),_:1})):L("",!0),_.value?(h(),$(R,{key:2},{default:b(()=>[Qe,t("button",{onClick:c[7]||(c[7]=m=>_.value=!1),class:"btn shadow-red-400/50"}," Close ")]),_:1})):L("",!0)],64)}}},Ze={class:"check h-screen flex justify-center items-center"},et={class:"container w-10/12 sm:w-8/12 md:w-6/12 lg:w-4/12 h-80 bg-white rounded-md p-4"},tt=t("h1",{class:"text-3xl text-center"},"Register",-1),st=["onSubmit"],ot=t("input",{type:"submit",value:"Register",class:"w-full h-10 bg-dark-bg-secondary text-very-light-grayish-blue rounded-md cursor-pointer"},null,-1),at=E("Login"),rt={class:"title"},nt={setup(l){const{register:a}=N(),n=k(""),o=k(""),e=k(""),s=k(""),i=k(!1),g=O(),_=f=>{switch(f){case"auth/email-already-in-use":n.value="",s.value="Email already in use! Please try again";break;case"auth/invalid-email":n.value="",s.value="Invalid email! Please try again";break;case"auth/weak-password":s.value="Weak password! Please try again";break}o.value="",e.value="",i.value=!0},y=async()=>{o.value==e.value?(await a(n.value,o.value).then().catch(f=>{_(f.code)}),P()):(s.value="Wrong password confirmation, please try again!",o.value="",e.value="",i.value=!0)},P=()=>{V(u,f=>{f&&g.replace("/")})};return j(()=>{u.currentUser&&g.push("/")}),(f,r)=>{const x=B("router-link");return h(),w(S,null,[t("div",Ze,[t("div",et,[tt,t("form",{onSubmit:H(y,["prevent"]),class:"flex flex-col gap-4"},[T(t("input",{type:"email",placeholder:"Email","onUpdate:modelValue":r[0]||(r[0]=d=>n.value=d),class:"w-full h-10"},null,512),[[D,n.value]]),T(t("input",{type:"password",placeholder:"Password","onUpdate:modelValue":r[1]||(r[1]=d=>o.value=d),class:"w-full h-10"},null,512),[[D,o.value]]),T(t("input",{type:"password",placeholder:"Confirm Password","onUpdate:modelValue":r[2]||(r[2]=d=>e.value=d),class:"w-full h-10"},null,512),[[D,e.value]]),ot,t("p",null,[U(x,{to:"/login"},{default:b(()=>[at]),_:1})])],40,st)])]),i.value?(h(),$(R,{key:0,onClose:r[4]||(r[4]=d=>i.value=!1)},{default:b(()=>[t("h1",rt,C(s.value),1),t("button",{onClick:r[3]||(r[3]=d=>i.value=!1),class:"btn shadow-red-400/50"}," Close ")]),_:1})):L("",!0)],64)}}},lt=de({history:ue(),routes:[{path:"/",name:"Home",component:ze},{path:"/login",name:"Login",component:Xe},{path:"/register",name:"Register",component:nt}]}),F=ce(ge);F.use(pe());F.use(lt).mount("#app");
