import{i as J,B as Q,g as X,u as Z,a as ee,o as N,b as z,r as L,c as g,d as D,e as x,f as e,h as te,n as E,y as K,C as M,_ as q,S as F,j as se,k,l as f,t as T,w as $,v as C,m as B,s as oe,p as ae,q as re,x as ne,F as U,z as H,A,D as _,E as P,G as S,H as W,I as le,J as ie,K as de,L as ue}from"./vendor.e3e68a59.js";const ce=function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const t of s)if(t.type==="childList")for(const i of t.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&a(i)}).observe(document,{childList:!0,subtree:!0});function u(s){const t={};return s.integrity&&(t.integrity=s.integrity),s.referrerpolicy&&(t.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?t.credentials="include":s.crossorigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function a(s){if(s.ep)return;s.ep=!0;const t=u(s);fetch(s.href,t)}};ce();const fe={apiKey:"AIzaSyD5G1tB0tO3pSHEDtY8yzROY9uQrsYFSs4",authDomain:"todo-e47c0.firebaseapp.com",databaseURL:"https://todo-e47c0-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"todo-e47c0",storageBucket:"todo-e47c0.appspot.com",messagingSenderId:"391559150737",appId:"1:391559150737:web:2231f001dd5f4ec3991330"},ge=J(fe),V=Q(),p=X(ge),pe={setup(l){const o=Z(),u=ee();return N(()=>{z(p,a=>{a&&(u.path=="/login"||u.path=="/register")&&o.replace("/")})}),(a,s)=>{const t=L("router-view");return g(),D(t)}}};const he={class:"modal-overlay flex h-full w-full items-center justify-center bg-black/40"},ke={class:"modal-body flex h-1/3 w-10/12 flex-col items-center justify-around rounded-xl bg-white p-5 dark:bg-dark-bg dark:shadow dark:shadow-sky-200 sm:w-3/5 md:w-2/5"},j={props:{isDark:Boolean},setup(l){const o=l;return(u,a)=>(g(),x("div",{class:E(["modal fixed bottom-0 top-0 right-0 left-0",[o.isDark?"dark":""]])},[e("div",he,[e("div",ke,[te(u.$slots,"default")])])],2))}},O=()=>({addData:async(a,s)=>{try{await K(M(V,"users",s),{tasks:a})}catch(t){console.log("Error handling document: ",t)}},readData:async a=>{try{const s=R();s.$reset(),(await q(F(V,"users"))).forEach(d=>{if(d.id==a&&s.tasks.length==0){for(let b of d.data().tasks)s.tasks.push(b);s.filteredTasks=s.tasks}}),(await q(F(V,"theme"))).forEach(d=>{d.id==a&&(s.isDark=d.data().theme)})}catch(s){console.log("Error handling document: ",s)}},updateTheme:async a=>{const t=R().isDark;await K(M(V,"theme",a),{theme:t})}}),{addData:Y}=O(),R=se("main",{state:()=>({tasks:[],filteredTasks:[],counter:0,isDark:!1,activeEl:0}),getters:{},actions:{addTask(l){l!=""&&(this.tasks=[{content:l,done:!1},...this.tasks],this.counter++,this.filteredTasks=this.tasks,this.activeEl=0)},removeTask(l,o){this.tasks=this.tasks.filter(u=>u!=l),this.filteredTasks=this.tasks,l.done||this.counter--,Y(this.tasks,o)},filterTask(l){this.activeEl=l.id,this.filteredTasks=this.tasks.filter(o=>{if(l.name=="Active")return o.done==!1;if(l.name=="Completed")return o.done==!0;if(l.name=="All")return o})},toggleTask(l,o){l.done=!l.done,l.done==!0?this.counter--:this.counter++,Y(this.tasks,o)},toggleTheme(){this.isDark=!this.isDark}}}),me={class:"relative flex h-auto w-full items-center gap-4 border-b border-light-grayish-blue bg-very-light-gray px-4 py-[10px] dark:border-dark-border dark:bg-dark-bg-secondary"},be={props:{task:Object},setup(l){const o=l,{addData:u}=O(),a=R(),s={icon:["bg-icon-check w-[11px] h-[9px]"],text:["line-through text-light-grayish-blue dark:text-dark-text-secondary"]},t={icon:["w-5 h-5 border-2 rounded-full border-gray-200"],text:["dark:text-dark-text"]};let i="";const d=k(),b=h=>{i=h.content,d.value=h},y=h=>{d.value&&(d.value=null,h.content=h.content.trim(),u(a.tasks,p.currentUser.uid),h.content||a.removeTask(h,p.currentUser.uid))},v=h=>{d.value=null,h.content=i};return(h,r)=>(g(),x("div",me,[e("div",{class:E(["flex h-5 w-5 cursor-pointer items-center justify-center rounded-full",[o.task.done?"check":""]]),onClick:r[0]||(r[0]=n=>f(a).toggleTask(o.task,f(p).currentUser!=null?f(p).currentUser.uid:""))},[e("i",{class:E([o.task.done?s.icon:t.icon])},null,2)],2),o.task!=d.value?(g(),x("label",{key:0,class:E([[o.task.done?s.text:t.text],"w-3/4 break-words"]),onDblclick:r[1]||(r[1]=n=>b(o.task))},T(o.task.content),35)):$((g(),x("input",{key:1,type:"text","onUpdate:modelValue":r[2]||(r[2]=n=>o.task.content=n),class:"w-3/4",onVnodeMounted:r[3]||(r[3]=({el:n})=>n.focus()),onBlur:r[4]||(r[4]=n=>y(o.task)),onKeyup:[r[5]||(r[5]=B(n=>y(o.task),["enter"])),r[6]||(r[6]=B(n=>v(o.task),["escape"]))]},null,544)),[[C,o.task.content]]),e("i",{class:"absolute right-5 h-[18px] w-[18px] cursor-pointer bg-icon-cross transition-all hover:rotate-90",onClick:r[7]||(r[7]=n=>f(a).removeTask(o.task,f(p).currentUser!=null?f(p).currentUser.uid:""))})]))}},I=()=>({login:async(s,t)=>{await oe(p,s,t)},register:async(s,t)=>{await ae(p,s,t)},logout:async()=>{await re(p)},resetPassword:async s=>{await ne(p,s)}}),ye={class:"h-full min-h-screen dark:bg-dark-bg"},ve=e("div",{class:"z-0 h-72 bg-desktop-light bg-cover bg-center dark:bg-desktop-dark"},null,-1),we={class:"container z-10 mx-auto -mt-52 h-auto w-11/12 pb-40 md:w-3/5 lg:w-2/5"},xe={class:"flex justify-between"},_e=e("h1",{class:"text-3xl font-bold tracking-widest text-very-light-gray"}," TODO ",-1),$e={class:"mt-12 mb-8 flex h-12 w-full items-center gap-4 rounded bg-white px-4 dark:bg-dark-bg-secondary"},Ce=e("div",{class:"h-5 w-5 rounded-full border-2 border-gray-200"},null,-1),De=["onKeypress"],Te={class:"overflow-hidden rounded-t shadow-xl"},Ee={class:"relative flex h-12 w-full items-center justify-between rounded-b bg-white px-4 shadow-xl dark:bg-dark-bg-secondary"},Pe={class:"text-xs text-dark-grayish-blue dark:text-dark-text-secondary"},Ue={class:"absolute bottom-[-5rem] left-0 flex h-12 w-full justify-center gap-4 rounded bg-white text-sm shadow-xl dark:bg-dark-bg-secondary sm:static sm:w-fit sm:shadow-none"},Ae=["onClick"],Se={class:"absolute top-5 right-5 dark:text-white lg:top-10 lg:right-10"},je={key:0},Le=P("Login"),Ve={key:1},Re=P("Logout"),Be=e("h1",{class:"title dark:text-dark-text"},"Do you want to log out?",-1),Oe={class:"flex w-full justify-around"},Ie=P("Yes"),Ne={setup(l){const{addData:o,readData:u,updateTheme:a}=O(),{logout:s}=I(),t=R(),i=k(""),d=k(!1),b=k(!1),y=()=>{d.value?(t.addTask(i.value),o(t.tasks,p.currentUser.uid),i.value=""):(t.addTask(i.value),i.value="")},v=[{name:"All",id:0},{name:"Active",id:1},{name:"Completed",id:2}],h=()=>{for(let r of t.filteredTasks)r.done&&(t.removeTask(r,p.currentUser!=null?p.currentUser.uid:""),t.activeEl=0)};return N(()=>{z(p,async r=>{r?(await u(r.uid),t.counter=t.tasks.filter(n=>!n.done).length,d.value=!0):(d.value=!1,t.$reset())})}),(r,n)=>{const c=L("router-link");return g(),x(U,null,[e("div",{class:E([f(t).isDark?"dark":""])},[e("div",ye,[ve,e("div",we,[e("div",xe,[_e,e("i",{class:"h-[26px] w-[26px] cursor-pointer bg-icon-moon transition delay-1000 ease-in dark:bg-icon-sun",onClick:n[0]||(n[0]=w=>(f(t).toggleTheme(),f(p).currentUser?f(a)(f(p).currentUser.uid):null))})]),e("div",$e,[Ce,$(e("input",{type:"text",class:"w-full caret-bright-blue placeholder:text-dark-grayish-blue focus:outline-none dark:bg-dark-bg-secondary dark:text-dark-text",placeholder:"Add a new task","onUpdate:modelValue":n[1]||(n[1]=w=>i.value=w),onKeypress:B(y,["enter"])},null,40,De),[[C,i.value]])]),e("div",Te,[(g(!0),x(U,null,H(f(t).filteredTasks,(w,m)=>(g(),D(be,{key:m,task:w},null,8,["task"]))),128))]),e("div",Ee,[e("p",Pe,T(f(t).counter)+" "+T(f(t).counter>=2?"tasks":"task")+" left ",1),e("div",Ue,[(g(),x(U,null,H(v,(w,m)=>e("button",{key:m,onClick:yt=>f(t).filterTask(w),class:E(["dark:text-dark-text-secondary",[f(t).activeEl===m?"active":""]])},T(w.name),11,Ae)),64))]),e("button",{class:"text-sm dark:text-dark-text-secondary",onClick:n[2]||(n[2]=w=>h())}," Clear Completed ")])]),e("div",Se,[d.value?(g(),x("div",Ve,[P(" Hi "+T(f(p).currentUser.email.split("@")[0])+", ",1),e("button",{onClick:n[3]||(n[3]=w=>b.value=!0)},[A(c,{to:"/"},{default:_(()=>[Re]),_:1})])])):(g(),x("button",je,[A(c,{to:"/login"},{default:_(()=>[Le]),_:1})]))])])],2),b.value?(g(),D(j,{key:0,isDark:f(t).isDark},{default:_(()=>[Be,e("div",Oe,[e("button",{onClick:n[4]||(n[4]=w=>b.value=!1),class:"btn shadow-red-400/50"}," No "),e("button",{onClick:n[5]||(n[5]=w=>(f(s)(),b.value=!1)),class:"btn bg-sky-400 shadow-sky-400/50"},[A(c,{to:"/"},{default:_(()=>[Ie]),_:1})])])]),_:1},8,["isDark"])):S("",!0)],64)}}},ze={class:"check flex h-screen items-center justify-center"},Ke={class:"mx-auto w-11/12 max-w-sm overflow-hidden rounded-lg bg-white shadow-md dark:bg-gray-800 sm:w-full"},Me={class:"px-6 py-4"},qe=e("h2",{class:"text-center text-3xl font-medium text-gray-600"},"Login",-1),Fe=["onSubmit"],He={class:"mt-4 w-full"},We={class:"mt-4 w-full"},Ye={class:"mt-4 flex items-center justify-between"},Ge=e("input",{type:"submit",value:"Login",class:"transform cursor-pointer rounded bg-gray-700 px-4 py-2 leading-5 text-white transition-colors duration-200 hover:bg-gray-600 focus:outline-none"},null,-1),Je={class:"flex items-center justify-center bg-gray-50 py-4 text-center dark:bg-gray-700"},Qe=e("span",{class:"text-sm text-gray-600 dark:text-gray-200"},"Don't have an account? ",-1),Xe={class:"mx-2 text-sm font-bold text-sky-500 hover:underline dark:text-sky-400"},Ze=P("Register"),et={class:"title"},tt=e("h1",{class:"title"},"Please check your email!",-1),st={setup(l){const{login:o,resetPassword:u}=I(),a=k(""),s=k(""),t=k(""),i=k(!1),d=k(!1),b=k(!1),y=k(""),v=n=>{switch(n){case"auth/wrong-password":t.value="Wrong password! Please try again";break;case"auth/user-not-found":t.value="User not found! Please register or try again";break}s.value="",i.value=!0},h=async()=>{(a.value||s.value)!=""?await o(a.value,s.value).then().catch(n=>{v(n.code)}):(t.value="Please type in your email address or password",i.value=!0)},r=async()=>{y.value!=""&&(await u(y.value),d.value=!1,b.value=!0)};return(n,c)=>{const w=L("router-link");return g(),x(U,null,[e("div",ze,[e("div",Ke,[e("div",Me,[qe,e("form",{onSubmit:W(h,["prevent"])},[e("div",He,[$(e("input",{class:"mt-2 block w-full rounded-md border bg-white px-4 py-2 text-gray-700 placeholder-gray-500 focus:border-blue-400 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-40 dark:border-gray-600 dark:bg-gray-800 dark:placeholder-gray-400 dark:focus:border-blue-300",type:"email",placeholder:"Email","aria-label":"Email","onUpdate:modelValue":c[0]||(c[0]=m=>a.value=m)},null,512),[[C,a.value]])]),e("div",We,[$(e("input",{class:"mt-2 block w-full rounded-md border bg-white px-4 py-2 text-gray-700 placeholder-gray-500 focus:border-blue-400 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-40 dark:border-gray-600 dark:bg-gray-800 dark:placeholder-gray-400 dark:focus:border-blue-300",type:"password",placeholder:"Password","aria-label":"Password","onUpdate:modelValue":c[1]||(c[1]=m=>s.value=m)},null,512),[[C,s.value]])]),e("div",Ye,[e("a",{href:"#",class:"text-sm text-gray-600 hover:text-gray-500 dark:text-gray-200",onClick:c[2]||(c[2]=m=>d.value=!0)},"Forget Password?"),Ge])],40,Fe)]),e("div",Je,[Qe,e("div",Xe,[A(w,{to:"/register"},{default:_(()=>[Ze]),_:1})])])])]),i.value?(g(),D(j,{key:0},{default:_(()=>[e("h1",et,T(t.value),1),e("button",{onClick:c[3]||(c[3]=m=>i.value=!1),class:"btn shadow-red-400/50"}," Close ")]),_:1})):S("",!0),d.value?(g(),D(j,{key:1},{default:_(()=>[$(e("input",{type:"email","onUpdate:modelValue":c[4]||(c[4]=m=>y.value=m),placeholder:"Your email",class:"mt-2 block w-full rounded-md border border-gray-700 bg-white px-4 py-2 text-gray-700 placeholder-gray-500 focus:border-blue-400 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-40"},null,512),[[C,y.value]]),e("button",{onClick:c[5]||(c[5]=m=>r()),class:"btn h-10 w-3/4 bg-sky-400 shadow-sky-400/50 lg:w-1/2"}," Send reset link! "),e("button",{onClick:c[6]||(c[6]=m=>d.value=!1),class:"btn h-10 w-3/4 shadow-red-400/50 lg:w-1/2"}," Close ")]),_:1})):S("",!0),b.value?(g(),D(j,{key:2},{default:_(()=>[tt,e("button",{onClick:c[7]||(c[7]=m=>b.value=!1),class:"btn shadow-red-400/50"}," Close ")]),_:1})):S("",!0)],64)}}},ot={class:"check flex h-screen items-center justify-center"},at={class:"mx-auto w-11/12 max-w-sm overflow-hidden rounded-lg bg-white shadow-md dark:bg-gray-800 sm:w-full"},rt={class:"px-6 py-4"},nt=e("h2",{class:"text-center text-3xl font-medium text-gray-600"}," Create account ",-1),lt=["onSubmit"],it={class:"mt-4 w-full"},dt={class:"mt-4 w-full"},ut={class:"mt-4 w-full"},ct=e("div",{class:"mt-4 flex items-center justify-end"},[e("input",{type:"submit",value:"Register",class:"transform cursor-pointer rounded bg-gray-700 px-4 py-2 leading-5 text-white transition-colors duration-200 hover:bg-gray-600 focus:outline-none"})],-1),ft={class:"flex items-center justify-center bg-gray-50 py-4 text-center dark:bg-gray-700"},gt=e("span",{class:"text-sm text-gray-600 dark:text-gray-200"},"Have an account? ",-1),pt={class:"mx-2 text-sm font-bold text-sky-500 hover:underline dark:text-sky-400"},ht=P("Login"),kt={class:"title"},mt={setup(l){const{register:o}=I(),u=k(""),a=k(""),s=k(""),t=k(""),i=k(!1),d=y=>{switch(y){case"auth/email-already-in-use":u.value="",t.value="Email already in use. Please try again!";break;case"auth/invalid-email":u.value="",t.value="Invalid email. Please try again!";break;case"auth/weak-password":t.value="Weak password. Please try again!";break}a.value="",s.value="",i.value=!0},b=async()=>{a.value==s.value?await o(u.value,a.value).then().catch(y=>{d(y.code)}):(t.value="Wrong password confirmation, please try again!",a.value="",s.value="",i.value=!0)};return(y,v)=>{const h=L("router-link");return g(),x(U,null,[e("div",ot,[e("div",at,[e("div",rt,[nt,e("form",{onSubmit:W(b,["prevent"])},[e("div",it,[$(e("input",{class:"mt-2 block w-full rounded-md border bg-white px-4 py-2 text-gray-700 placeholder-gray-500 focus:border-blue-400 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-40 dark:border-gray-600 dark:bg-gray-800 dark:placeholder-gray-400 dark:focus:border-blue-300",type:"email",placeholder:"Email","aria-label":"Email","onUpdate:modelValue":v[0]||(v[0]=r=>u.value=r)},null,512),[[C,u.value]])]),e("div",dt,[$(e("input",{class:"mt-2 block w-full rounded-md border bg-white px-4 py-2 text-gray-700 placeholder-gray-500 focus:border-blue-400 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-40 dark:border-gray-600 dark:bg-gray-800 dark:placeholder-gray-400 dark:focus:border-blue-300",type:"password",placeholder:"Password","aria-label":"Password","onUpdate:modelValue":v[1]||(v[1]=r=>a.value=r)},null,512),[[C,a.value]])]),e("div",ut,[$(e("input",{class:"mt-2 block w-full rounded-md border bg-white px-4 py-2 text-gray-700 placeholder-gray-500 focus:border-blue-400 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-40 dark:border-gray-600 dark:bg-gray-800 dark:placeholder-gray-400 dark:focus:border-blue-300",type:"password",placeholder:"Confirm Password","aria-label":"Confirm Password","onUpdate:modelValue":v[2]||(v[2]=r=>s.value=r)},null,512),[[C,s.value]])]),ct],40,lt)]),e("div",ft,[gt,e("div",pt,[A(h,{to:"/login"},{default:_(()=>[ht]),_:1})])])])]),i.value?(g(),D(j,{key:0},{default:_(()=>[e("h1",kt,T(t.value),1),e("button",{onClick:v[3]||(v[3]=r=>i.value=!1),class:"btn shadow-red-400/50"}," Close ")]),_:1})):S("",!0)],64)}}},bt=le({history:ie(),routes:[{path:"/",name:"Home",component:Ne},{path:"/login",name:"Login",component:st},{path:"/register",name:"Register",component:mt}]}),G=de(pe);G.use(ue());G.use(bt).mount("#app");
