import{i as W,B as Y,g as q,u as G,a as J,o as I,b as N,r as L,c as f,d as C,e as v,f as e,h as Q,n as T,y as X,C as Z,_ as ee,S as te,j as se,k,l as p,t as D,w as _,v as $,m as V,s as oe,p as ae,q as re,x as ne,F as A,z,A as S,D as w,E,G as U,H as K,I as le,J as ie,K as de,L as ue}from"./vendor.1e12f0aa.js";const ce=function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))r(t);new MutationObserver(t=>{for(const s of t)if(s.type==="childList")for(const d of s.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&r(d)}).observe(document,{childList:!0,subtree:!0});function i(t){const s={};return t.integrity&&(s.integrity=t.integrity),t.referrerpolicy&&(s.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?s.credentials="include":t.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(t){if(t.ep)return;t.ep=!0;const s=i(t);fetch(t.href,s)}};ce();const fe={apiKey:"AIzaSyD5G1tB0tO3pSHEDtY8yzROY9uQrsYFSs4",authDomain:"todo-e47c0.firebaseapp.com",databaseURL:"https://todo-e47c0-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"todo-e47c0",storageBucket:"todo-e47c0.appspot.com",messagingSenderId:"391559150737",appId:"1:391559150737:web:2231f001dd5f4ec3991330"},ge=W(fe),M=Y(),h=q(ge),pe={setup(l){const a=G(),i=J();return I(()=>{N(h,r=>{r&&(i.path=="/login"||i.path=="/register")&&a.replace("/")})}),(r,t)=>{const s=L("router-view");return f(),C(s)}}};const ke={class:"modal-overlay flex h-full w-full items-center justify-center bg-black/40"},he={class:"modal-body flex h-1/3 w-10/12 flex-col items-center justify-around rounded-xl bg-white p-5 dark:bg-dark-bg sm:w-3/5 md:w-2/5"},j={props:{isDark:Boolean},setup(l){const a=l;return(i,r)=>(f(),v("div",{class:T(["modal fixed bottom-0 top-0 right-0 left-0",[a.isDark?"dark":""]])},[e("div",ke,[e("div",he,[Q(i.$slots,"default")])])],2))}},R=()=>({addData:async(i,r)=>{try{await X(Z(M,"users",r),{tasks:i})}catch(t){console.log("Error handling document: ",t)}},readData:async i=>{try{const r=B();r.$reset(),(await ee(te(M,"users"))).forEach(s=>{if(s.id==i&&r.tasks.length==0){for(let d of s.data().tasks)r.tasks.push(d);r.filteredTasks=r.tasks}})}catch(r){console.log("Error handling document: ",r)}}}),{addData:F}=R(),B=se("main",{state:()=>({tasks:[],filteredTasks:[],counter:0,isDark:!1,activeEl:0}),getters:{},actions:{addTask(l){l!=""&&(this.tasks=[{content:l,done:!1},...this.tasks],this.counter++,this.filteredTasks=this.tasks,this.activeEl=0)},removeTask(l,a){this.tasks=this.tasks.filter(i=>i!=l),this.filteredTasks=this.tasks,l.done||this.counter--,F(this.tasks,a)},filterTask(l){this.activeEl=l.id,this.filteredTasks=this.tasks.filter(a=>{if(l.name=="Active")return a.done==!1;if(l.name=="Completed")return a.done==!0;if(l.name=="All")return a})},toggleTask(l,a){l.done=!l.done,l.done==!0?this.counter--:this.counter++,F(this.tasks,a)},toggleTheme(){this.isDark=!this.isDark}}}),be={class:"relative flex h-auto w-full items-center gap-4 border-b border-light-grayish-blue bg-very-light-gray px-4 py-[10px] dark:border-dark-border dark:bg-dark-bg-secondary"},me={props:{task:Object},setup(l){const a=l,{addData:i}=R(),r=B(),t={icon:["bg-icon-check w-[11px] h-[9px]"],text:["line-through text-light-grayish-blue dark:text-dark-text-secondary"]},s={icon:["w-5 h-5 border-2 rounded-full border-gray-200"],text:["dark:text-dark-text"]};let d="";const g=k(),x=u=>{d=u.content,g.value=u},b=u=>{g.value&&(g.value=null,u.content=u.content.trim(),i(r.tasks,h.currentUser.uid),u.content||r.removeTask(u,h.currentUser.uid))},m=u=>{g.value=null,u.content=d};return(u,o)=>(f(),v("div",be,[e("div",{class:T(["flex h-5 w-5 cursor-pointer items-center justify-center rounded-full",[a.task.done?"check":""]]),onClick:o[0]||(o[0]=c=>p(r).toggleTask(a.task,p(h).currentUser!=null?p(h).currentUser.uid:""))},[e("i",{class:T([a.task.done?t.icon:s.icon])},null,2)],2),a.task!=g.value?(f(),v("label",{key:0,class:T([[a.task.done?t.text:s.text],"w-3/4 break-words"]),onDblclick:o[1]||(o[1]=c=>x(a.task))},D(a.task.content),35)):_((f(),v("input",{key:1,type:"text","onUpdate:modelValue":o[2]||(o[2]=c=>a.task.content=c),class:"w-3/4",onVnodeMounted:o[3]||(o[3]=({el:c})=>c.focus()),onBlur:o[4]||(o[4]=c=>b(a.task)),onKeyup:[o[5]||(o[5]=V(c=>b(a.task),["enter"])),o[6]||(o[6]=V(c=>m(a.task),["escape"]))]},null,544)),[[$,a.task.content]]),e("i",{class:"absolute right-5 h-[18px] w-[18px] cursor-pointer bg-icon-cross transition-all hover:rotate-90",onClick:o[7]||(o[7]=c=>p(r).removeTask(a.task,p(h).currentUser!=null?p(h).currentUser.uid:""))})]))}},O=()=>({login:async(t,s)=>{await oe(h,t,s)},register:async(t,s)=>{await ae(h,t,s)},logout:async()=>{await re(h)},resetPassword:async t=>{await ne(h,t)}}),ye={class:"h-full dark:bg-dark-bg"},ve=e("div",{class:"z-0 h-72 bg-desktop-light bg-cover bg-center dark:bg-desktop-dark"},null,-1),we={class:"container z-10 mx-auto -mt-52 h-auto w-11/12 pb-40 md:w-3/5 lg:w-2/5"},xe={class:"flex justify-between"},_e=e("h1",{class:"text-3xl font-bold tracking-widest text-very-light-gray"}," TODO ",-1),$e={class:"mt-12 mb-8 flex h-12 w-full items-center gap-4 rounded bg-white px-4 dark:bg-dark-bg-secondary"},Ce=e("div",{class:"h-5 w-5 rounded-full border-2 border-gray-200"},null,-1),De=["onKeypress"],Pe={class:"overflow-hidden rounded-t shadow-xl"},Te={class:"relative flex h-12 w-full items-center justify-between rounded-b bg-white px-4 shadow-xl dark:bg-dark-bg-secondary"},Ee={class:"text-xs text-dark-grayish-blue dark:text-dark-text-secondary"},Ae={class:"absolute bottom-[-5rem] left-0 flex h-12 w-full justify-center gap-4 rounded bg-white text-sm shadow-xl dark:bg-dark-bg-secondary sm:static sm:w-fit sm:shadow-none"},Se=["onClick"],Ue={class:"absolute top-5 right-5 lg:top-10 lg:right-10"},je={key:0},Le=E("Login"),Ve={key:1},Re=E("Logout"),Be=e("h1",{class:"title dark:text-dark-text"},"Do you want to log out?",-1),Oe={class:"flex w-full justify-around"},Ie=E("Yes"),Ne={setup(l){const{addData:a,readData:i}=R(),{logout:r}=O(),t=B(),s=k(""),d=k(!1),g=k(!1),x=()=>{d.value?(t.addTask(s.value),a(t.tasks,h.currentUser.uid),s.value=""):(t.addTask(s.value),s.value="")},b=[{name:"All",id:0},{name:"Active",id:1},{name:"Completed",id:2}],m=()=>{for(let u of t.filteredTasks)u.done&&(t.removeTask(u,h.currentUser!=null?h.currentUser.uid:""),t.activeEl=0)};return I(()=>{N(h,async u=>{u?(await i(u.uid),t.counter=t.tasks.filter(o=>!o.done).length,d.value=!0):(d.value=!1,t.$reset())})}),(u,o)=>{const c=L("router-link");return f(),v(A,null,[e("div",{class:T([p(t).isDark?"dark":""])},[e("div",ye,[ve,e("div",we,[e("div",xe,[_e,e("i",{class:"h-[26px] w-[26px] cursor-pointer bg-icon-moon transition delay-1000 ease-in dark:bg-icon-sun",onClick:o[0]||(o[0]=(...n)=>p(t).toggleTheme&&p(t).toggleTheme(...n))})]),e("div",$e,[Ce,_(e("input",{type:"text",class:"w-full caret-bright-blue placeholder:text-dark-grayish-blue focus:outline-none dark:bg-dark-bg-secondary dark:text-dark-text",placeholder:"Add a new task","onUpdate:modelValue":o[1]||(o[1]=n=>s.value=n),onKeypress:V(x,["enter"])},null,40,De),[[$,s.value]])]),e("div",Pe,[(f(!0),v(A,null,z(p(t).filteredTasks,(n,P)=>(f(),C(me,{key:P,task:n},null,8,["task"]))),128))]),e("div",Te,[e("p",Ee,D(p(t).counter)+" "+D(p(t).counter>=2?"tasks":"task")+" left ",1),e("div",Ae,[(f(),v(A,null,z(b,(n,P)=>e("button",{key:P,onClick:y=>p(t).filterTask(n),class:T(["dark:text-dark-text-secondary",[p(t).activeEl===P?"active":""]])},D(n.name),11,Se)),64))]),e("button",{class:"text-sm dark:text-dark-text-secondary",onClick:o[2]||(o[2]=n=>m())}," Clear Completed ")])])])],2),e("div",Ue,[d.value?(f(),v("div",Ve,[E(" Hi "+D(p(h).currentUser.email.split("@")[0])+", ",1),e("button",{onClick:o[3]||(o[3]=n=>g.value=!0)},[S(c,{to:"/"},{default:w(()=>[Re]),_:1})])])):(f(),v("button",je,[S(c,{to:"/login"},{default:w(()=>[Le]),_:1})]))]),g.value?(f(),C(j,{key:0,isDark:p(t).isDark},{default:w(()=>[Be,e("div",Oe,[e("button",{onClick:o[4]||(o[4]=n=>g.value=!1),class:"btn shadow-red-400/50"}," No "),e("button",{onClick:o[5]||(o[5]=n=>(p(r)(),g.value=!1)),class:"btn bg-sky-400 shadow-sky-400/50"},[S(c,{to:"/"},{default:w(()=>[Ie]),_:1})])])]),_:1},8,["isDark"])):U("",!0)],64)}}},ze={class:"check flex h-screen items-center justify-center"},Ke={class:"mx-auto w-11/12 max-w-sm overflow-hidden rounded-lg bg-white shadow-md dark:bg-gray-800 sm:w-full"},Me={class:"px-6 py-4"},Fe=e("h2",{class:"text-center text-3xl font-medium text-gray-600"},"Login",-1),He=["onSubmit"],We={class:"mt-4 w-full"},Ye={class:"mt-4 w-full"},qe={class:"mt-4 flex items-center justify-between"},Ge=e("input",{type:"submit",value:"Login",class:"transform cursor-pointer rounded bg-gray-700 px-4 py-2 leading-5 text-white transition-colors duration-200 hover:bg-gray-600 focus:outline-none"},null,-1),Je={class:"flex items-center justify-center bg-gray-50 py-4 text-center dark:bg-gray-700"},Qe=e("span",{class:"text-sm text-gray-600 dark:text-gray-200"},"Don't have an account? ",-1),Xe={class:"mx-2 text-sm font-bold text-sky-500 hover:underline dark:text-sky-400"},Ze=E("Register"),et={class:"title"},tt=e("h1",{class:"title"},"Please check your email!",-1),st={setup(l){const{login:a,resetPassword:i}=O(),r=k(""),t=k(""),s=k(""),d=k(!1),g=k(!1),x=k(!1),b=k(""),m=c=>{switch(c){case"auth/wrong-password":s.value="Wrong password! Please try again";break;case"auth/user-not-found":s.value="User not found! Please register or try again";break}t.value="",d.value=!0},u=async()=>{(r.value||t.value)!=""?await a(r.value,t.value).then().catch(c=>{m(c.code)}):(s.value="Please type in your email address or password",d.value=!0)},o=async()=>{b.value!=""&&(await i(b.value),g.value=!1,x.value=!0)};return(c,n)=>{const P=L("router-link");return f(),v(A,null,[e("div",ze,[e("div",Ke,[e("div",Me,[Fe,e("form",{onSubmit:K(u,["prevent"])},[e("div",We,[_(e("input",{class:"mt-2 block w-full rounded-md border bg-white px-4 py-2 text-gray-700 placeholder-gray-500 focus:border-blue-400 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-40 dark:border-gray-600 dark:bg-gray-800 dark:placeholder-gray-400 dark:focus:border-blue-300",type:"email",placeholder:"Email","aria-label":"Email","onUpdate:modelValue":n[0]||(n[0]=y=>r.value=y)},null,512),[[$,r.value]])]),e("div",Ye,[_(e("input",{class:"mt-2 block w-full rounded-md border bg-white px-4 py-2 text-gray-700 placeholder-gray-500 focus:border-blue-400 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-40 dark:border-gray-600 dark:bg-gray-800 dark:placeholder-gray-400 dark:focus:border-blue-300",type:"password",placeholder:"Password","aria-label":"Password","onUpdate:modelValue":n[1]||(n[1]=y=>t.value=y)},null,512),[[$,t.value]])]),e("div",qe,[e("a",{href:"#",class:"text-sm text-gray-600 hover:text-gray-500 dark:text-gray-200",onClick:n[2]||(n[2]=y=>g.value=!0)},"Forget Password?"),Ge])],40,He)]),e("div",Je,[Qe,e("div",Xe,[S(P,{to:"/register"},{default:w(()=>[Ze]),_:1})])])])]),d.value?(f(),C(j,{key:0},{default:w(()=>[e("h1",et,D(s.value),1),e("button",{onClick:n[3]||(n[3]=y=>d.value=!1),class:"btn shadow-red-400/50"}," Close ")]),_:1})):U("",!0),g.value?(f(),C(j,{key:1},{default:w(()=>[_(e("input",{type:"email","onUpdate:modelValue":n[4]||(n[4]=y=>b.value=y),placeholder:"Your email",class:"mt-2 block w-full rounded-md border border-gray-700 bg-white px-4 py-2 text-gray-700 placeholder-gray-500 focus:border-blue-400 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-40"},null,512),[[$,b.value]]),e("button",{onClick:n[5]||(n[5]=y=>o()),class:"btn h-10 w-3/4 bg-sky-400 shadow-sky-400/50 lg:w-1/2"}," Send reset link! "),e("button",{onClick:n[6]||(n[6]=y=>g.value=!1),class:"btn h-10 w-3/4 shadow-red-400/50 lg:w-1/2"}," Close ")]),_:1})):U("",!0),x.value?(f(),C(j,{key:2},{default:w(()=>[tt,e("button",{onClick:n[7]||(n[7]=y=>x.value=!1),class:"btn shadow-red-400/50"}," Close ")]),_:1})):U("",!0)],64)}}},ot={class:"check flex h-screen items-center justify-center"},at={class:"mx-auto w-11/12 max-w-sm overflow-hidden rounded-lg bg-white shadow-md dark:bg-gray-800 sm:w-full"},rt={class:"px-6 py-4"},nt=e("h2",{class:"text-center text-3xl font-medium text-gray-600"}," Create account ",-1),lt=["onSubmit"],it={class:"mt-4 w-full"},dt={class:"mt-4 w-full"},ut={class:"mt-4 w-full"},ct=e("div",{class:"mt-4 flex items-center justify-end"},[e("input",{type:"submit",value:"Register",class:"transform cursor-pointer rounded bg-gray-700 px-4 py-2 leading-5 text-white transition-colors duration-200 hover:bg-gray-600 focus:outline-none"})],-1),ft={class:"flex items-center justify-center bg-gray-50 py-4 text-center dark:bg-gray-700"},gt=e("span",{class:"text-sm text-gray-600 dark:text-gray-200"},"Have an account? ",-1),pt={class:"mx-2 text-sm font-bold text-sky-500 hover:underline dark:text-sky-400"},kt=E("Login"),ht={class:"title"},bt={setup(l){const{register:a}=O(),i=k(""),r=k(""),t=k(""),s=k(""),d=k(!1),g=b=>{switch(b){case"auth/email-already-in-use":i.value="",s.value="Email already in use. Please try again!";break;case"auth/invalid-email":i.value="",s.value="Invalid email. Please try again!";break;case"auth/weak-password":s.value="Weak password. Please try again!";break}r.value="",t.value="",d.value=!0},x=async()=>{r.value==t.value?await a(i.value,r.value).then().catch(b=>{g(b.code)}):(s.value="Wrong password confirmation, please try again!",r.value="",t.value="",d.value=!0)};return(b,m)=>{const u=L("router-link");return f(),v(A,null,[e("div",ot,[e("div",at,[e("div",rt,[nt,e("form",{onSubmit:K(x,["prevent"])},[e("div",it,[_(e("input",{class:"mt-2 block w-full rounded-md border bg-white px-4 py-2 text-gray-700 placeholder-gray-500 focus:border-blue-400 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-40 dark:border-gray-600 dark:bg-gray-800 dark:placeholder-gray-400 dark:focus:border-blue-300",type:"email",placeholder:"Email","aria-label":"Email","onUpdate:modelValue":m[0]||(m[0]=o=>i.value=o)},null,512),[[$,i.value]])]),e("div",dt,[_(e("input",{class:"mt-2 block w-full rounded-md border bg-white px-4 py-2 text-gray-700 placeholder-gray-500 focus:border-blue-400 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-40 dark:border-gray-600 dark:bg-gray-800 dark:placeholder-gray-400 dark:focus:border-blue-300",type:"password",placeholder:"Password","aria-label":"Password","onUpdate:modelValue":m[1]||(m[1]=o=>r.value=o)},null,512),[[$,r.value]])]),e("div",ut,[_(e("input",{class:"mt-2 block w-full rounded-md border bg-white px-4 py-2 text-gray-700 placeholder-gray-500 focus:border-blue-400 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-40 dark:border-gray-600 dark:bg-gray-800 dark:placeholder-gray-400 dark:focus:border-blue-300",type:"password",placeholder:"Confirm Password","aria-label":"Confirm Password","onUpdate:modelValue":m[2]||(m[2]=o=>t.value=o)},null,512),[[$,t.value]])]),ct],40,lt)]),e("div",ft,[gt,e("div",pt,[S(u,{to:"/login"},{default:w(()=>[kt]),_:1})])])])]),d.value?(f(),C(j,{key:0},{default:w(()=>[e("h1",ht,D(s.value),1),e("button",{onClick:m[3]||(m[3]=o=>d.value=!1),class:"btn shadow-red-400/50"}," Close ")]),_:1})):U("",!0)],64)}}},mt=le({history:ie(),routes:[{path:"/",name:"Home",component:Ne},{path:"/login",name:"Login",component:st},{path:"/register",name:"Register",component:bt}]}),H=de(pe);H.use(ue());H.use(mt).mount("#app");
